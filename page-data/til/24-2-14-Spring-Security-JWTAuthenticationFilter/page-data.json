{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/24-2-14-Spring-Security-JWTAuthenticationFilter/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00ì˜ Archive"}},"markdownRemark":{"id":"38cfce23-4eb1-5002-88e8-bedc27c41d58","excerpt":"JWTAuthenticationFilterëŠ” ğŸ”—ìœ íŠœë¸Œ ì˜ìƒì„ ë³´ê³  ë”°ë¼í—€ê³ , ì´ ê²Œì‹œê¸€ì€ ê·¸ ë‚´ìš©ì„ ì¶”ê°€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤. JWT Header í† í°ì˜ íƒ€ì…(ëŒ€ì²´ë¡œ JWT)ê³¼ ì„ íƒí•œ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ì— ëŒ€í•´ ëª…ì‹œí•˜ê³  ìˆë‹¤. ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” HS256ê³¼ RS25â€¦","html":"<blockquote>\n<p>JWTAuthenticationFilterëŠ” <a href=\"https://www.youtube.com/watch?v=KiYo3f7Fggs&#x26;ab_channel=TeddySmith\">ğŸ”—ìœ íŠœë¸Œ ì˜ìƒ</a>ì„ ë³´ê³  ë”°ë¼í—€ê³ , ì´ ê²Œì‹œê¸€ì€ ê·¸ ë‚´ìš©ì„ ì¶”ê°€ë¡œ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.</p>\n</blockquote>\n<h1 id=\"jwt\" style=\"position:relative;\"><a href=\"#jwt\" aria-label=\"jwt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>JWT</h1>\n<h2 id=\"header\" style=\"position:relative;\"><a href=\"#header\" aria-label=\"header permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Header</h2>\n<p>í† í°ì˜ <strong>íƒ€ì…</strong>(ëŒ€ì²´ë¡œ JWT)ê³¼ ì„ íƒí•œ <strong>ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜</strong>ì— ëŒ€í•´ ëª…ì‹œí•˜ê³  ìˆë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"alg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"HS256\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"typ\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"JWT\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œëŠ” HS256ê³¼ RS256ì´ ìˆë‹¤.</p>\n<h2 id=\"payload\" style=\"position:relative;\"><a href=\"#payload\" aria-label=\"payload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Payload</h2>\n<p><strong>Claim</strong>ì„ ë‹´ê³  ìˆë‹¤. <strong>Claim</strong>ì´ë€ ë‹¨ìˆœí•˜ê²Œ í† í°ì— ë‹´ê¸´ ì •ë³´ë¥¼ ì˜ë¯¸í•˜ëŠ”ë° ë³´í†µ ì‚¬ìš©ìì— ê´€í•œ ì •ë³´ë¥¼ ë‹´ëŠ”ë‹¤. <strong>Claim</strong>ì—ëŠ” 3ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤.</p>\n<ul>\n<li>\n<p><a href=\"https://datatracker.ietf.org/doc/html/rfc7519#section-4.1\">Registered</a></p>\n<p>ë¯¸ë¦¬ ì •í•´ì§„ í•­ëª©ë“¤ì´ë‹¤. í•„ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ê¶Œì¥ë˜ëŠ” í•­ëª©ë“¤ì´ë‹¤. <strong>iss</strong>, <strong>exp</strong>, <strong>sub</strong>, <strong>aud</strong> ë“±ì˜ í•­ëª©ì´ë‹¤.</p>\n</li>\n<li>\n<p><a href=\"https://www.iana.org/assignments/jwt/jwt.xhtml\">Public</a></p>\n<p>ììœ ë¡­ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ ì¶©ëŒì„ í”¼í•˜ê¸° ìœ„í•´ ì›¬ë§Œí•˜ë©´ í‘œì¤€ì— í•´ë‹¹í•˜ëŠ” í•„ë“œë¥¼ ì‚¬ìš©í•´ ì„¤ì •í•˜ë„ë¡ ê¶Œì¥í•œë‹¤.</p>\n</li>\n<li>\n<p>Private</p>\n<p>í† í°ì„ ì“°ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ê°„ì— ì •í•œ í•­ëª©ì„ ì˜ë¯¸í•˜ê³ , Registeredë‚˜ Public claimì— í•´ë‹¹í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.</p>\n</li>\n</ul>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"sub\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1234567890\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John Doe\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"admin\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ê³³ì— ìœ ì €ëª…ì´ë‚˜ ê´€ë ¨ëœ ì •ë³´ë“¤ì„ ë‹´ì„ ìˆ˜ ìˆì§€ë§Œ, ë¬´ê²°ì„±ì„ ë³´ì¦í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ë•Œë¬¸ì— ë°ì´í„°ê°€ ê³µê°œë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹´ìœ¼ë©´ ì•ˆëœë‹¤.</p>\n<h2 id=\"signature\" style=\"position:relative;\"><a href=\"#signature\" aria-label=\"signature permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Signature</h2>\n<p>Headerì™€ Payloadë¥¼ ì•”í˜¸í™”í•˜ì—¬ ë¬´ê²°ì„±ì„ ë³´ì¦í•œë‹¤. ì´ ë•Œ ì‚¬ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì€ Headerì— ì •ì˜ë˜ì–´ ìˆë‹¤.</p>\n<p>HS256ëŠ” ëŒ€ì¹­í‚¤ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ, ë‘ ì†¡ìˆ˜ì‹ ì ê°„ì— ê³µìœ ë˜ëŠ” ëŒ€ì¹­í‚¤ê°€ ìˆì–´ì•¼ í•œë‹¤.</p>\n<p>RS256ëŠ” ë¹„ëŒ€ì¹­í‚¤ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ, ë¹„ë°€í‚¤ì™€ ê³µê°œí‚¤ê°€ ì¡´ì¬í•œë‹¤. ë¹„ë°€í‚¤ëŠ” ë…¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.</p>\n<h1 id=\"jwtë¥¼-ì“°ëŠ”-ì´ìœ \" style=\"position:relative;\"><a href=\"#jwt%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"jwtë¥¼ ì“°ëŠ” ì´ìœ  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>JWTë¥¼ ì“°ëŠ” ì´ìœ </h1>\n<h2 id=\"ì¥ì \" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"ì¥ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>ì¥ì </h2>\n<ul>\n<li>ì„œëª…ëœ í† í°ì´ë¯€ë¡œ, ë‹¤ë¥¸ í† í°ë³´ë‹¤ ë³´ì•ˆì„±ì´ ë†’ë‹¤.</li>\n<li>í† í°ì˜ payloadì— ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.</li>\n<li>ë„ë©”ì¸ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ê´€ê³„ì—†ì´ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.</li>\n<li>í‘œì¤€ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆë‹¤.</li>\n</ul>\n<h2 id=\"ë‹¨ì \" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"ë‹¨ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>ë‹¨ì </h2>\n<ul>\n<li>payloadê°€ ì»¤ì§ˆ ê²½ìš° í†µì‹ ì— ë¶€í•˜ê°€ ê±¸ë¦¬ê²Œ ëœë‹¤.</li>\n<li>í† í°ì˜ ìˆ˜ëª…ì„ ê´€ë¦¬í•´ì•¼í•œë‹¤.</li>\n</ul>\n<h1 id=\"defaultsecurityfilterchain\" style=\"position:relative;\"><a href=\"#defaultsecurityfilterchain\" aria-label=\"defaultsecurityfilterchain permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>DefaultSecurityFilterChain</h1>\n<p>Spring Securityë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” FilterChainì€ <code class=\"language-text\">DefaultSecurityFilterChain</code>ì´ë‹¤. ì¤‘ë‹¨ì ì„ ì°ê³  ë””ë²„ê¹…ì„ í•´ë³´ë©´ ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ FilterChainì— ë‹´ê²¨ìˆëŠ” ì—¬ëŸ¬ í•„í„°ë“¤ì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac0856770d8be4d86a37e8d7e2b73428/690c6/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACM0lEQVR42j2SW24TSRhGexEMJl3Xv+7dbuzYJE7GkECEQDMh8IQQoBE7YA2IycLPqNvSPBxVPZS++i+nq8+3vLg6cDhs2V+es9muqUMhtEIsmTY9p01bYmsLoRTysCamRAiBGBMigkggxETnc0XaRKkZaRVJkZaEHIToPVkc4h2xDqQ2IiGgtcIYjdEaYwzW2v/PzodISJEoGhsdIoYiPVEcySuC7clOkWyPeEOq7VRdDKQUMOpsweoTXb58Rzl+oBzvaVdv2dz8xebmnuHyjrZ/zXDxhrK7oe5vKbtbyvmRtr8l725J56/I5zek7UvCdE2crunS9QP5+Il09UD7857p5Qfa8SPt+EC5+pt6fU+8eM/h40/e/vPIm2+/uPv+m1ffHjl+feTw5V8uPv/m8ssj490POmsV1p1h59ZEUZOhREWNDuctxmqsCM707AdPq5WhFtZDZRobJUWsVjx7+gf96gmdjCMuRiRGcknUWkil4kPBxYLk+R6x1rBbZ2prjONIrXVZQt8rVqtnrJ6u6JWi863hQlgWU0oi50RIGRcyPs3qNJz3GKPYtEhKmZwzKZ10cc6hlUYpRa96Oj9O+FioJeFiwIhggixV59ZIuWBCxTnLbkxLWMl56aS1thBE0EotoZ1MG0KrjOu6PAqzf3EW1S/+hdlD8Rh9musi8Ew4MYesVquFvu/pXKqkNjBN82+FWjPDMLc0u+mpKVCiYCVjfERbj5G6oLSlPztbgma01vwHLm1AZ9s3w58AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/ac0856770d8be4d86a37e8d7e2b73428/f058b/image-1.png\"\n        srcset=\"/static/ac0856770d8be4d86a37e8d7e2b73428/c26ae/image-1.png 158w,\n/static/ac0856770d8be4d86a37e8d7e2b73428/6bdcf/image-1.png 315w,\n/static/ac0856770d8be4d86a37e8d7e2b73428/f058b/image-1.png 630w,\n/static/ac0856770d8be4d86a37e8d7e2b73428/40601/image-1.png 945w,\n/static/ac0856770d8be4d86a37e8d7e2b73428/690c6/image-1.png 1201w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>ê°„ë‹¨í•˜ê²Œ ì–´ë–¤ í•„í„°ë“¤ì¸ì§€ ì •ë¦¬í•´ë³´ì•˜ë‹¤.</p>\n<table>\n<thead>\n<tr>\n<th>í•„í„°</th>\n<th>ì„¤ëª…</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">DisableEncodeUrlFilter</code></td>\n<td>Urlë¡œ ì—¬ê²¨ì§€ì§€ ì•ŠëŠ” Urlì— ì„¸ì…˜ idê°€ í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">WebAsyncManagerIntegrationFilter</code></td>\n<td><code class=\"language-text\">SecurityContextì™€</code> Springì˜ <code class=\"language-text\">WebAsyncManagerë¥¼</code> í†µí•©í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">SecurityContextHolderFilter</code></td>\n<td><code class=\"language-text\">SecurityContextRepositoryë¥¼</code> ì‚¬ìš©í•˜ì—¬ <code class=\"language-text\">SecurityContextë¥¼</code> íšë“í•œ í›„ <code class=\"language-text\">SecurityContextHolderì—</code> ì €ì¥í•œë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë‹¤ì–‘í•œ ì¸ì¦ê³¼ì •ì—ì„œ í™œìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">HeaderWriterFilter</code></td>\n<td>X-Frame-Options, X-Xss-Protection, X-Content-Type-Optionê³¼ ê°™ì€ í—¤ë”ë¥¼ ì¶”ê°€í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">CorsFilter</code></td>\n<td>pre-flight ìš”ì²­ê³¼ CORS ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µ í—¤ë”ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">LogoutFilter</code></td>\n<td>ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ë¥¼ í•œë‹¤. ì‹¤ì œë¡œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ê°€ ë˜ì—ˆë‹¤ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">RequestCacheAwareFilter</code></td>\n<td>í˜„ì¬ ìš”ì²­ì´ ìºì‹œëœ ìš”ì²­ê³¼ ì¼ì¹˜í•˜ë©´ ìºì‹œëœ ìš”ì²­ì„ ëŒ€ì‹  ì²˜ë¦¬í•œë‹¤.</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">SecurityContextHolderAwareRequestFilter</code></td>\n<td>...</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">AnonymousAuthenticationFilter</code></td>\n<td>...</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">ExceptionTranslationFilter</code></td>\n<td>...</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">AuthorizationFilter</code></td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"jwt-authentication-flow\" style=\"position:relative;\"><a href=\"#jwt-authentication-flow\" aria-label=\"jwt authentication flow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Jwt Authentication Flow</h1>\n<p>ì´ˆê¸°í™” ê³¼ì •ì—ì„œ 3ê°œì˜ í•„í„°ê°€ ë” ì¶”ê°€ë˜ëŠ”ë°, ì•„ë˜ ì‚¬ì§„ì„ ë³´ë©´ <code class=\"language-text\">UsernamePasswordAuthenticationFilterì™€</code> <code class=\"language-text\">DefaultLoginPageGeneratingFilter</code>, <code class=\"language-text\">DefaultLogoutPageGeneratingFilterê°€</code> ì¶”ê°€ë˜ì—ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf0b1510540ad96267851ceef4623b35/bb3ba/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB30lEQVR42lWS2W7bMBBF/Re2bGuzuGixvCct0ACJYS2UKHl5jvsNbdr/xw04ktX04WAIPhzc4eXodv+D6/tvXN9/dfP+gdv9g863n39x2B/wJAJIxiHDEFIKCCEgpRzwfQ+TyYQYNecb6uYCM5v2Ct1e0Zo7fYbSF2xXKb4LjiU3IvmfLJQhOOfwPA/T6bQX1jlqdUJTZSizV5T5G5EdX6CKI5ZpipftGuXzN/zYHrDZ7LHbHbDfPxFpukEQcHAuidG5qaCrAm2j0GiFSmVEkR/pnguBkDnYpRHiKEEcx0iShDBpXdfDbDqjhAYSNnWBViuc2wqNLlGVGcr8SPeMcYiFjXUi6A2jKALnDLZtk2A8HhPDG+q6E5g0TX/OszeiVvkgXIYcjAuEUiJgDI7jwHFder/5bPZFWBUkqauc0FUOVZyQnV4HIffnSCNO68u+lDDsYIzBsqwh5UjXBSqV/xPWxZDya8J1LDo5533TYmjYdV1MLatvWSsSmXUNJrERmZRmmvWMcBUJLFgnC+k/ShLatjN8GRJe2opSmXIepRhRkXUtCymx4Qs8JzESIeD7PlzPo1KsPpWZDyghFaJLPM6qPJGwVhm1Grou1kGA1SKA6ziw5zYc2+mK6TFrm/kJyvBekWRwZY0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/bf0b1510540ad96267851ceef4623b35/f058b/image.png\"\n        srcset=\"/static/bf0b1510540ad96267851ceef4623b35/c26ae/image.png 158w,\n/static/bf0b1510540ad96267851ceef4623b35/6bdcf/image.png 315w,\n/static/bf0b1510540ad96267851ceef4623b35/f058b/image.png 630w,\n/static/bf0b1510540ad96267851ceef4623b35/40601/image.png 945w,\n/static/bf0b1510540ad96267851ceef4623b35/bb3ba/image.png 1121w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">attemptAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">throws</span> <span class=\"token class-name\">AuthenticationException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>postOnly <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationServiceException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Authentication method not supported: \"</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> <span class=\"token function\">obtainUsername</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        username <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>username <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> username<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> password <span class=\"token operator\">=</span> <span class=\"token function\">obtainPassword</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        password <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>password <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> password <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> authRequest <span class=\"token operator\">=</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">.</span><span class=\"token function\">unauthenticated</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span>\n                password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Allow subclasses to set the \"details\" property</span>\n        <span class=\"token function\">setDetails</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> authRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAuthenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>authRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">UsernamePasswordAuthenticationFilter</code>ì„ í†µê³¼í•  ë•Œ <code class=\"language-text\">attemptAuthentication</code> ë©”ì„œë“œê°€ ì‹¤í–‰ëœë‹¤. ì´ ë©”ì„œë“œëŠ” ìš”ì²­ìœ¼ë¡œë¶€í„° Username, passwordë¥¼ íšë“í•œ í›„ <code class=\"language-text\">AuthenticationTokenì„</code> ìƒì„±í•˜ê³  <code class=\"language-text\">AuthenticationManager</code>ì—ê²Œ ì¸ì¦ì„ ë§¡ê¸´ë‹¤.</p>\n<p>Jwtë¡œ ì¸ì¦ì„ ì§„í–‰í•œë‹¤ë©´, ì´ ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì´í›„ì— ì‹¤í–‰ë˜ëŠ” <code class=\"language-text\">AuthorizationFilter</code>ì—ì„œ ì—ëŸ¬ê°€ ë‚  ìˆ˜ë°–ì— ì—†ë‹¤(<code class=\"language-text\">Authentication</code> ê°ì²´ê°€ ì—†ê¸° ë•Œë¬¸ì— Roleì´ë‚˜ Authorityë¥¼ ì¡°íšŒí•  ìˆ˜ ì—†ë‹¤). ë”°ë¼ì„œ í•„í„° ë‚´ë¶€ì—ì„œ Jwtë¥¼ ê²€ì¦í•˜ê³ , ì ì ˆí•œ <code class=\"language-text\">Authentication</code> ê°ì²´ë¥¼ ì°¾ì•„ <code class=\"language-text\">SecurityContext</code>ì— ë“±ë¡í•´ì•¼ í•œë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf315ef3c61f98cc054ea92256d95411/8affb/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACO0lEQVR42mWS/0sTYRzH75+q3wv8A4TctCgs8xdDCEQotCLqF0sSKmMaoZBGRjQnfVH7ZtqyWLrdbTrU3VxuU6e7Od2x3d3u7hW7TYt6w4v3w/uHN8/n+TwCNdm2TTKZJJ1OY5om/0pRchT2dyH/GVuZwtiZRM9MOm4p06C8BT2DcFhWkShJ+P1+52xZ1l91NiOjz1n48R7W2zHDZ9j+4mZn1sXunBstdA6W3XAQQEgm08TXZKJShPCihPgzSFSMIK/ESKU2KagFSqUSmqZXu8v5KuZ+lfJ+LdsDy0AY9PZy1dPMtYFWugcu0l1xTytdAxfofdpFIv6LfH6PQkHFMg0oxUGLgSbXPAa6DMVVMFWE+2M36Xjoomuwmc5Hp+nsb+KK5ywd/S5ueC4hBiVyOYXRZ2ME5qdAbiMzU8/2zCl2Zg9xYYTqoRBAWF1ZIy4nWJcTrETXkMSIc6t4LEFsVSabzaKqqjOyoamgLlPOi5Tz0hHGnoR9IDpPIITCQRalAKHwAvMBPzNfPxKKLNayIIqiOIV/ZDlL+p9qLlx/0ob79nFaeuto7jnB+TsnablbR8OtY1x+0MRmcgtVLeCbeEMo8AkS7RwE3GS/NaLMN5KZayD3vQmWXNUtv/owwqC3h+GJPoZ89xyGfX089vbwYnqIdGoTXdcQpTCpjRh29h2l5EtKG16y0RH0lA9z+zXsjoO+hVDWy2CCbYJV8wqVzDIsisUipmnh840TWVqqxKglm6IOatE4+sOH+g3RCrgCZdW9tgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/bf315ef3c61f98cc054ea92256d95411/f058b/image-2.png\"\n        srcset=\"/static/bf315ef3c61f98cc054ea92256d95411/c26ae/image-2.png 158w,\n/static/bf315ef3c61f98cc054ea92256d95411/6bdcf/image-2.png 315w,\n/static/bf315ef3c61f98cc054ea92256d95411/f058b/image-2.png 630w,\n/static/bf315ef3c61f98cc054ea92256d95411/40601/image-2.png 945w,\n/static/bf315ef3c61f98cc054ea92256d95411/8affb/image-2.png 1254w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>http íŒ¨í‚· í—¤ë”ì— ë‹´ê¸´ í† í°ì„ ê²€ì¦í•˜ì—¬ ìœ íš¨í•œì§€ íŒë‹¨í•œë‹¤. ë§Œì•½ ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì´ë¼ë©´ í•„í„°ëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>í† í°ì— ë‹´ê¸´ Payloadë¥¼ íŒŒì‹±í•˜ì—¬ í† í°ì— ë‹´ê¸´ ì‚¬ìš©ìëª…ì„ ì½ì–´ì˜¨ í›„ ë¯¸ë¦¬ ì„¤ì •í•œ <code class=\"language-text\">UserDetailsService</code> Bean ê°ì²´ë¥¼ í†µí•´ í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìì˜ <code class=\"language-text\">UserDetails</code> ê°ì²´ë¥¼ ì–»ì–´ì˜¨ë‹¤.</li>\n<li><code class=\"language-text\">UserDetailsë¥¼</code> <code class=\"language-text\">AutheticationToken</code>ìœ¼ë¡œ ê°€ê³µí•˜ì—¬ <code class=\"language-text\">SecurityContext</code>ì— ë“±ë¡í•œë‹¤.</li>\n<li><code class=\"language-text\">AuthorizationFilter</code>ì—ì„œ <code class=\"language-text\">SecurityContext</code>ë¥¼ ì¡°íšŒí•  ë•Œ, 3ë²ˆì—ì„œ ë“±ë¡í•œ ê°ì²´ë¥¼ ì¡°íšŒí•¨ìœ¼ë¡œ ì¸ì¦ê³¼ í—ˆê°€ê°€ í†µê³¼ëœë‹¤.</li>\n</ol>\n<h1 id=\"êµ¬í˜„\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"êµ¬í˜„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>êµ¬í˜„</h1>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// JwtAuthenticationFilter.java</span>\n\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserService</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FilterChain</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServletException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletRequest</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">jakarta<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletResponse</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">NonNull</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UsernamePasswordAuthenticationToken</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecurityContextHolder</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>userdetails<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserDetails</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebAuthenticationDetailsSource</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringUtils</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OncePerRequestFilter</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">OncePerRequestFilter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">JwtGenerator</span> jwtGenerator<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserService</span> userService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doFilterInternal</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@NonNull</span> <span class=\"token class-name\">FilterChain</span> filterChain<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> token <span class=\"token operator\">=</span> <span class=\"token function\">getJwtFromRequest</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasText</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> jwtGenerator<span class=\"token punctuation\">.</span><span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> jwtGenerator<span class=\"token punctuation\">.</span><span class=\"token function\">getUsernameFromJWT</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">UserDetails</span> userDetails <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">loadUserByUsername</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span> authenticationToken <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>\n                    userDetails<span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                    userDetails<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            authenticationToken<span class=\"token punctuation\">.</span><span class=\"token function\">setDetails</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">WebAuthenticationDetailsSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">buildDetails</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">SecurityContextHolder</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAuthentication</span><span class=\"token punctuation\">(</span>authenticationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getJwtFromRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> bearerToken <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasText</span><span class=\"token punctuation\">(</span>bearerToken<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bearer \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JwtAuthenticationFilterë¥¼ êµ¬í˜„í•  ë•Œì—ëŠ” <code class=\"language-text\">OncePerRequestFilter</code>ë¥¼ ìƒì†í•˜ì—¬ êµ¬í˜„í•œë‹¤. ì´ í´ë˜ìŠ¤ëŠ” ê° ìš”ì²­ë§ˆë‹¤ í•œ ë²ˆì”© ê¼­ ì‹¤í–‰ë˜ëŠ” í•„í„°ì´ë¯€ë¡œ, ë§¤ ìš”ì²­ë§ˆë‹¤ ì¸ì¦ ì²˜ë¦¬ë¥¼ ê±°ì¹˜ê²Œ ëœë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// JwtGenerator.java</span>\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Claims</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Jwts</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SignatureAlgorithm</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CompressionAlgorithm</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Keys</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationCredentialsNotFoundException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Authentication</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>crypto<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecretKey</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token import static\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecurityConstants</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtGenerator</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SecretKey</span> key <span class=\"token operator\">=</span> <span class=\"token function\">getSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">parser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">verifyWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseSignedClaims</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthenticationCredentialsNotFoundException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Jwt was expired or incorrect.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getUsernameFromJWT</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SecretKey</span> key <span class=\"token operator\">=</span> <span class=\"token function\">getSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Claims</span> claims <span class=\"token operator\">=</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">parser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">verifyWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseSignedClaims</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPayload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> claims<span class=\"token punctuation\">.</span><span class=\"token function\">getSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">generateToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Date</span> currentDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Date</span> expireDate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>currentDate<span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token constant\">JWT_EXPIRATION</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">SecretKey</span> key <span class=\"token operator\">=</span> <span class=\"token function\">getSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> token <span class=\"token operator\">=</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">subject</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">issuedAt</span><span class=\"token punctuation\">(</span>expireDate<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">signWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SIG</span><span class=\"token punctuation\">.</span><span class=\"token constant\">HS512</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> token<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SecretKey</span> <span class=\"token function\">getSecretKey</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// JWT_SECRETì€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ì •ì˜í•´ë‘” ì„ì˜ì˜ ë‚œìˆ˜ë¡œ ì•”í˜¸í™”ì— ì‚¬ìš©ëœë‹¤.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Keys</span><span class=\"token punctuation\">.</span><span class=\"token function\">hmacShaKeyFor</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JWT_SECRET</span><span class=\"token punctuation\">.</span><span class=\"token function\">getBytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// SecurityConfig.java</span>\n\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserService</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationConfiguration</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>builders<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableWebSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>configurers<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AbstractHttpConfigurer</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SessionCreationPolicy</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>crypto<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PasswordEncoderFactories</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>crypto<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PasswordEncoder</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecurityFilterChain</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UsernamePasswordAuthenticationFilter</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Objects</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableWebSecurity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SecurityFilterChain</span> <span class=\"token function\">filterChain</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        http\n                <span class=\"token punctuation\">.</span><span class=\"token function\">csrf</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AbstractHttpConfigurer</span><span class=\"token operator\">::</span><span class=\"token function\">disable</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">exceptionHandling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>exception<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> exception<span class=\"token punctuation\">.</span><span class=\"token function\">authenticationEntryPoint</span><span class=\"token punctuation\">(</span><span class=\"token function\">jwtAuthEntryPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">sessionManagement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> session<span class=\"token punctuation\">.</span><span class=\"token function\">sessionCreationPolicy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionCreationPolicy</span><span class=\"token punctuation\">.</span><span class=\"token constant\">STATELESS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">authorizeHttpRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>authorize<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span>\n                        authorize\n                                <span class=\"token punctuation\">.</span><span class=\"token function\">requestMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/auth/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                                <span class=\"token punctuation\">.</span><span class=\"token function\">anyRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        http<span class=\"token punctuation\">.</span><span class=\"token function\">addFilterBefore</span><span class=\"token punctuation\">(</span><span class=\"token function\">jwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">UsernamePasswordAuthenticationFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AuthenticationManager</span> <span class=\"token function\">authenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AuthenticationConfiguration</span> authenticationConfiguration<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> authenticationConfiguration<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthenticationManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserService</span> <span class=\"token function\">userDetailsService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PasswordEncoder</span> <span class=\"token function\">passwordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">PasswordEncoderFactories</span><span class=\"token punctuation\">.</span><span class=\"token function\">createDelegatingPasswordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthenticationFilter</span> <span class=\"token function\">jwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtAuthenticationFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtAuthEntryPoint</span> <span class=\"token function\">jwtAuthEntryPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtAuthEntryPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Jwt ì¸ì¦ë°©ì‹ì€ ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì„¸ì…˜ì˜ ìƒíƒœë¥¼ STATELESSë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.</p>\n<p>êµ¬í˜„í•œ <code class=\"language-text\">JwtAuthenticationFilter</code>ë¥¼ ë“±ë¡í•  ë•Œì—ëŠ” <code class=\"language-text\">addFilterBefore</code>ë¥¼ ì´ìš©í•˜ì—¬ <code class=\"language-text\">UsernamePasswordAuthenticationFilter</code>ì˜ ì§ì „ì— ë“±ë¡í–ˆë‹¤.</p>\n<p><code class=\"language-text\">/api/auth/**</code> íŒ¨í„´ì— ë¶€í•©í•˜ëŠ” URLë¡œ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš°, ë¡œê·¸ì¸ ë° ê³„ì •ê³¼ ê´€ë ¨ëœ ìš”ì²­ì´ê¸° ë•Œë¬¸ì— <code class=\"language-text\">permitAll()</code>ì²˜ë¦¬ë¥¼ í•˜ì—¬ ì¸ì¦ì„ ìš”êµ¬í•˜ì§€ ì•Šë„ë¡ ì²˜ë¦¬í–ˆë‹¤. ê·¸ë¦¬ê³  ì¸ì¦ì— ì‹¤íŒ¨í–ˆì„ ë•Œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ <code class=\"language-text\">JwtAuthEntryPoint</code>ë¥¼ ë“±ë¡í•˜ì˜€ë‹¤.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// LoginController.java</span>\n\n<span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>dto<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthResponseDto</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JwtGenerator</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>dto<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoginDto</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">User</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>learn<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserService</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpStatus</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ResponseEntity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationManager</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UsernamePasswordAuthenticationToken</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Authentication</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecurityContextHolder</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Optional</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/auth\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">UserService</span> userService<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">AuthenticationManager</span> authenticationManager<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JwtGenerator</span> jwtGenerator<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">LoginController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserService</span> userService<span class=\"token punctuation\">,</span> <span class=\"token class-name\">AuthenticationManager</span> authenticationManager<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JwtGenerator</span> jwtGenerator<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>userService <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>authenticationManager <span class=\"token operator\">=</span> authenticationManager<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jwtGenerator <span class=\"token operator\">=</span> jwtGenerator<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 201 ì½”ë“œë¥¼ ë°˜í™˜í•˜ê¸° ìœ„í•´ ResponseEntityë¥¼ ì‚¬ìš©í–ˆë‹¤.</span>\n    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/signup\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">signup</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">LoginDto</span> loginDto<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">></span></span> joinedUser <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>loginDto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>joinedUser<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CREATED</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/signin\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@ResponseBody</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AuthResponseDto</span> <span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Authentication</span> authentication <span class=\"token operator\">=</span> authenticationManager<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>\n                <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>\n                        user<span class=\"token punctuation\">.</span><span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                        user<span class=\"token punctuation\">.</span><span class=\"token function\">getPassword</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">SecurityContextHolder</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAuthentication</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> token <span class=\"token operator\">=</span> jwtGenerator<span class=\"token punctuation\">.</span><span class=\"token function\">generateToken</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthResponseDto</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ë¡œê·¸ì¸ì„ í•  ë•Œì—ëŠ” usernameê³¼ passwordê°€ ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì¸ì¦í•œ í›„ jwtë¥¼ ìƒì„±í•´ì„œ ê³§ë°”ë¡œ ë°˜í™˜í•˜ë„ë¡ ì²˜ë¦¬í–ˆë‹¤.</p>\n<p>LoginControllerë§Œ <code class=\"language-text\">permitAll()</code>ì´ ë˜ì–´ìˆê³  ê·¸ ì™¸ì—ëŠ” ì „ë¶€ <code class=\"language-text\">authenticated()</code>ì´ë¯€ë¡œ, <code class=\"language-text\">JwtAuthenticationFilter</code>ê°€ ë™ì‘í•œë‹¤.</p>\n<blockquote>\n<p>LoginDto, User, UserService ê°™ì€ í´ë˜ìŠ¤ë“¤ì€ ê¹ƒí—ˆë¸Œ ë§í¬ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤...\n<a href=\"https://github.com/10cheon00/learn-spring-security/tree/2f464cb138ef79514ec6989f45edc467137297db\">github.com/10cheon00/learn-spring-security</a></p>\n</blockquote>","frontmatter":{"title":"24-2-14 Spring Security JWTAuthenticationFilter","date":"February 14, 2024","description":null,"tags":["TIL","spring"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#jwt\">JWT</a></p>\n<ul>\n<li><a href=\"#header\">Header</a></li>\n<li><a href=\"#payload\">Payload</a></li>\n<li><a href=\"#signature\">Signature</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#jwt%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\">JWTë¥¼ ì“°ëŠ” ì´ìœ </a></p>\n<ul>\n<li><a href=\"#%EC%9E%A5%EC%A0%90\">ì¥ì </a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90\">ë‹¨ì </a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#defaultsecurityfilterchain\">DefaultSecurityFilterChain</a></p>\n</li>\n<li>\n<p><a href=\"#jwt-authentication-flow\">Jwt Authentication Flow</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B5%AC%ED%98%84\">êµ¬í˜„</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/til/24-1-31-Spring-Security-Method-Authorization/"},"frontmatter":{"title":"24-1-31 Spring Security Method Authorization","date":"January 31, 2024"}},"next":{"fields":{"slug":"/til/24-2-21-Spring-Dependency-Injection/"},"frontmatter":{"title":"24-2-21 Spring Dependency Injection","date":"February 21, 2024"}}},"pageContext":{"id":"38cfce23-4eb1-5002-88e8-bedc27c41d58","previousPostId":"803ad70b-1e26-57db-88db-270519c661f4","nextPostId":"b8da71c8-9a12-569c-b112-4da3aed2d8e4"}},"staticQueryHashes":["1846574571","230163734","3589320610"],"slicesMap":{}}